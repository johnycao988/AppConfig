
  upstream Elasticsearch-9200 {
    least_conn;
    server 10.39.101.226:9200;
  }

  upstream Elasticsearch-9300 {
    least_conn;
    server 10.39.107.124:9300;
  }

  upstream Kibana {
    least_conn;
    server 10.39.101.226:5601;
  }

  upstream Logstash {
    least_conn;
    server 10.39.101.226:3456;
    server 10.39.107.124:3456;
  }

  upstream apache-directory-server {
    least_conn;
    server 10.39.107.124:10389;
  }

  upstream cloud.config.server {
    least_conn;
  }

  upstream cloud.security.service {
    least_conn;
  }

  upstream consul {
    least_conn;
    server 10.39.101.226:8300;
    server 10.39.107.124:8300;
  }

  upstream consul-53 {
    least_conn;
    server 10.39.101.226:8600;
    server 10.39.101.226:8600;
  }

  upstream consul-8300 {
    least_conn;
    server 10.39.107.124:8300;
    server 10.39.107.124:8300;
  }

  upstream consul-8301 {
    least_conn;
    server 10.39.101.226:8301;
    server 10.39.101.226:8301;
    server 10.39.107.124:8301;
    server 10.39.107.124:8301;
  }

  upstream consul-8302 {
    least_conn;
    server 10.39.101.226:8302;
    server 10.39.101.226:8302;
    server 10.39.107.124:8302;
    server 10.39.107.124:8302;
  }

  upstream consul-8400 {
    least_conn;
    server 10.39.101.226:8400;
    server 10.39.107.124:8400;
  }

  upstream consul-8500 {
    least_conn;
    server 10.39.101.226:8500;
    server 10.39.107.124:8500;
  }

  upstream jenkins-50000 {
    least_conn;
    server 10.39.101.226:50000;
    server 10.39.107.124:50000;
  }

  upstream jenkins-8080 {
    least_conn;
    server 10.39.101.226:8080;
    server 10.39.107.124:8088;
  }

  upstream logstash {
    least_conn;
    server 10.39.101.226:3456;
    server 10.39.107.124:3456;
  }

  upstream mysql {
    least_conn;
    server 10.39.107.124:3306;
  }

  upstream nexus {
    least_conn;
    server 10.39.101.226:8081;
    server 10.39.107.124:8081;
  }

  upstream nginx-7097 {
    least_conn;
    server 10.39.107.124:7097;
  }

  upstream nginx-7098 {
    least_conn;
    server 10.39.101.226:7098;
  }

  upstream nginx-7099 {
    least_conn;
    server 10.39.107.124:7099;
  }

  upstream redis {
    least_conn;
    server 10.39.101.226:6379;
  }

  upstream registry {
    least_conn;
    server 10.39.101.226:5000;
  }

  upstream sonarqube-9000 {
    least_conn;
    server 10.39.107.124:9000;
  }

  upstream sonarqube-9092 {
    least_conn;
    server 10.39.101.226:9092;
  }


server {
  listen 80 default_server;
  proxy_set_header            Host $host;
  proxy_set_header            X-Forwarded-For $proxy_add_x_forwarded_for;

  location / {
    proxy_pass http://cart/cart/;
  }

  location /cart {
    proxy_pass http://cart/cart;
  }

  
  location /api/Elasticsearch-9200 {
    proxy_read_timeout 180;
    proxy_pass http://Elasticsearch-9200/Elasticsearch-9200;
  }
  
  location /api/Elasticsearch-9300 {
    proxy_read_timeout 180;
    proxy_pass http://Elasticsearch-9300/Elasticsearch-9300;
  }
  
  location /api/Kibana {
    proxy_read_timeout 180;
    proxy_pass http://Kibana/Kibana;
  }
  
  location /api/Logstash {
    proxy_read_timeout 180;
    proxy_pass http://Logstash/Logstash;
  }
  
  location /api/apache-directory-server {
    proxy_read_timeout 180;
    proxy_pass http://apache-directory-server/apache-directory-server;
  }
  
  location /api/cloud.config.server {
    proxy_read_timeout 180;
    proxy_pass http://cloud.config.server/cloud.config.server;
  }
  
  location /api/cloud.security.service {
    proxy_read_timeout 180;
    proxy_pass http://cloud.security.service/cloud.security.service;
  }
  
  location /api/consul {
    proxy_read_timeout 180;
    proxy_pass http://consul/consul;
  }
  
  location /api/consul-53 {
    proxy_read_timeout 180;
    proxy_pass http://consul-53/consul-53;
  }
  
  location /api/consul-8300 {
    proxy_read_timeout 180;
    proxy_pass http://consul-8300/consul-8300;
  }
  
  location /api/consul-8301 {
    proxy_read_timeout 180;
    proxy_pass http://consul-8301/consul-8301;
  }
  
  location /api/consul-8302 {
    proxy_read_timeout 180;
    proxy_pass http://consul-8302/consul-8302;
  }
  
  location /api/consul-8400 {
    proxy_read_timeout 180;
    proxy_pass http://consul-8400/consul-8400;
  }
  
  location /api/consul-8500 {
    proxy_read_timeout 180;
    proxy_pass http://consul-8500/consul-8500;
  }
  
  location /api/jenkins-50000 {
    proxy_read_timeout 180;
    proxy_pass http://jenkins-50000/jenkins-50000;
  }
  
  location /api/jenkins-8080 {
    proxy_read_timeout 180;
    proxy_pass http://jenkins-8080/jenkins-8080;
  }
  
  location /api/logstash {
    proxy_read_timeout 180;
    proxy_pass http://logstash/logstash;
  }
  
  location /api/mysql {
    proxy_read_timeout 180;
    proxy_pass http://mysql/mysql;
  }
  
  location /api/nexus {
    proxy_read_timeout 180;
    proxy_pass http://nexus/nexus;
  }
  
  location /api/nginx-7097 {
    proxy_read_timeout 180;
    proxy_pass http://nginx-7097/nginx-7097;
  }
  
  location /api/nginx-7098 {
    proxy_read_timeout 180;
    proxy_pass http://nginx-7098/nginx-7098;
  }
  
  location /api/nginx-7099 {
    proxy_read_timeout 180;
    proxy_pass http://nginx-7099/nginx-7099;
  }
  
  location /api/redis {
    proxy_read_timeout 180;
    proxy_pass http://redis/redis;
  }
  
  location /api/registry {
    proxy_read_timeout 180;
    proxy_pass http://registry/registry;
  }
  
  location /api/sonarqube-9000 {
    proxy_read_timeout 180;
    proxy_pass http://sonarqube-9000/sonarqube-9000;
  }
  
  location /api/sonarqube-9092 {
    proxy_read_timeout 180;
    proxy_pass http://sonarqube-9092/sonarqube-9092;
  }
  
}

